--任务描述

Quest_XiuXing = {}
Quest_XiuXing[1]={TargetType=QuestTargetType["Kill"], TargetID1=1003105, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[2]={TargetType=QuestTargetType["Kill"], TargetID1=1003106, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[3]={TargetType=QuestTargetType["Kill"], TargetID1=1003130, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[4]={TargetType=QuestTargetType["Kill"], TargetID1=1003131, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[5]={TargetType=QuestTargetType["Kill"], TargetID1=1003134, TargetID2=1003142, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[6]={TargetType=QuestTargetType["Kill"], TargetID1=1003137, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[7]={TargetType=QuestTargetType["Kill"], TargetID1=1003139, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[8]={TargetType=QuestTargetType["Kill"], TargetID1=1003145, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[9]={TargetType=QuestTargetType["Kill"], TargetID1=1003149, TargetID2=0, TargetID3=0, TargetID4=0, Num1=20, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[101]={TargetType=QuestTargetType["Kill"], TargetID1=1004010, TargetID2=1004011, TargetID3=1004012, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[102]={TargetType=QuestTargetType["Kill"], TargetID1=1004007, TargetID2=1004008, TargetID3=1004009, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[103]={TargetType=QuestTargetType["Kill"], TargetID1=1004101, TargetID2=1004102, TargetID3=1004103, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[104]={TargetType=QuestTargetType["Kill"], TargetID1=1004107, TargetID2=1004106, TargetID3=1004108, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[105]={TargetType=QuestTargetType["Kill"], TargetID1=1004109, TargetID2=1004110, TargetID3=1004111, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[106]={TargetType=QuestTargetType["Kill"], TargetID1=1004115, TargetID2=1004114, TargetID3=1004116, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[107]={TargetType=QuestTargetType["Kill"], TargetID1=1004122, TargetID2=1004123, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[108]={TargetType=QuestTargetType["Kill"], TargetID1=1004125, TargetID2=1004126, TargetID3=1004127, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[109]={TargetType=QuestTargetType["Kill"], TargetID1=1004132, TargetID2=1004133, TargetID3=1004134, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[110]={TargetType=QuestTargetType["Kill"], TargetID1=1004129, TargetID2=1004130, TargetID3=1004131, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[111]={TargetType=QuestTargetType["Kill"], TargetID1=1004210, TargetID2=1004211, TargetID3=1004212, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[112]={TargetType=QuestTargetType["Kill"], TargetID1=1004213, TargetID2=1004214, TargetID3=1004215, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[113]={TargetType=QuestTargetType["Kill"], TargetID1=1004217, TargetID2=1004218, TargetID3=1004219, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[114]={TargetType=QuestTargetType["Kill"], TargetID1=1004220, TargetID2=1004221, TargetID3=1004222, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[115]={TargetType=QuestTargetType["Kill"], TargetID1=1004225, TargetID2=1004226, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[116]={TargetType=QuestTargetType["Kill"], TargetID1=1004242, TargetID2=1004243, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[117]={TargetType=QuestTargetType["Kill"], TargetID1=1004229, TargetID2=1004230, TargetID3=1004231, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[118]={TargetType=QuestTargetType["Kill"], TargetID1=1004233, TargetID2=1004234, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[119]={TargetType=QuestTargetType["Kill"], TargetID1=1004236, TargetID2=1004237, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[120]={TargetType=QuestTargetType["Kill"], TargetID1=1004238, TargetID2=1004239, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[121]={TargetType=QuestTargetType["Kill"], TargetID1=1004306, TargetID2=1004307, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[122]={TargetType=QuestTargetType["Kill"], TargetID1=1004301, TargetID2=1004302, TargetID3=1004303, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[123]={TargetType=QuestTargetType["Kill"], TargetID1=1004313, TargetID2=1004314, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[124]={TargetType=QuestTargetType["Kill"], TargetID1=1004319, TargetID2=1004320, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[125]={TargetType=QuestTargetType["Kill"], TargetID1=1004326, TargetID2=0, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[126]={TargetType=QuestTargetType["Kill"], TargetID1=1004329, TargetID2=1004330, TargetID3=0, TargetID4=0, Num1=25, Num2=0, Num3=0, Num4=0, MsgID=16102}
Quest_XiuXing[201]={TargetType=QuestTargetType["Kill"], TargetID1=1005001, TargetID2=1005002, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[202]={TargetType=QuestTargetType["Kill"], TargetID1=1005008, TargetID2=1005009, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[203]={TargetType=QuestTargetType["Kill"], TargetID1=1005017, TargetID2=1005019, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[204]={TargetType=QuestTargetType["Kill"], TargetID1=1005021, TargetID2=1005022, TargetID3=1005023, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[205]={TargetType=QuestTargetType["Kill"], TargetID1=1005109, TargetID2=1005110, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[206]={TargetType=QuestTargetType["Kill"], TargetID1=1005111, TargetID2=1005112, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[207]={TargetType=QuestTargetType["Kill"], TargetID1=1005137, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[208]={TargetType=QuestTargetType["Kill"], TargetID1=1005121, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[209]={TargetType=QuestTargetType["Kill"], TargetID1=1005125, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[210]={TargetType=QuestTargetType["Kill"], TargetID1=1005211, TargetID2=1005212, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[211]={TargetType=QuestTargetType["Kill"], TargetID1=1005209, TargetID2=1005208, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[212]={TargetType=QuestTargetType["Kill"], TargetID1=1005233, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[213]={TargetType=QuestTargetType["Kill"], TargetID1=1005224, TargetID2=1005223, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[214]={TargetType=QuestTargetType["Kill"], TargetID1=1005302, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[215]={TargetType=QuestTargetType["Kill"], TargetID1=1005306, TargetID2=1005307, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[216]={TargetType=QuestTargetType["Kill"], TargetID1=1005310, TargetID2=0, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[217]={TargetType=QuestTargetType["Kill"], TargetID1=1005321, TargetID2=1005322, TargetID3=0, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[218]={TargetType=QuestTargetType["Kill"], TargetID1=1005318, TargetID2=1005319, TargetID3=1005320, TargetID4=0, Num1=30, Num2=0, Num3=0, Num4=0, MsgID=16103}
Quest_XiuXing[301]={TargetType=QuestTargetType["Kill"], TargetID1=1006102, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[302]={TargetType=QuestTargetType["Kill"], TargetID1=1006106, TargetID2=1006107, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[303]={TargetType=QuestTargetType["Kill"], TargetID1=1006109, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[304]={TargetType=QuestTargetType["Kill"], TargetID1=1006115, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[305]={TargetType=QuestTargetType["Kill"], TargetID1=1006205, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[306]={TargetType=QuestTargetType["Kill"], TargetID1=1006202, TargetID2=1006203, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[307]={TargetType=QuestTargetType["Kill"], TargetID1=1006214, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[308]={TargetType=QuestTargetType["Kill"], TargetID1=1006217, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[309]={TargetType=QuestTargetType["Kill"], TargetID1=1006224, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16101}
Quest_XiuXing[310]={TargetType=QuestTargetType["Kill"], TargetID1=1006301, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[311]={TargetType=QuestTargetType["Kill"], TargetID1=1006156, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[312]={TargetType=QuestTargetType["Kill"], TargetID1=1006148, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[313]={TargetType=QuestTargetType["Kill"], TargetID1=1006318, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[314]={TargetType=QuestTargetType["Kill"], TargetID1=1006325, TargetID2=1006329, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[315]={TargetType=QuestTargetType["Kill"], TargetID1=1006413, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[316]={TargetType=QuestTargetType["Kill"], TargetID1=1006409, TargetID2=1006410, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[317]={TargetType=QuestTargetType["Kill"], TargetID1=1006422, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[318]={TargetType=QuestTargetType["Kill"], TargetID1=1006417, TargetID2=1006418, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16104}
Quest_XiuXing[401]={TargetType=QuestTargetType["Kill"], TargetID1=1007001, TargetID2=1007002, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[402]={TargetType=QuestTargetType["Kill"], TargetID1=1007003, TargetID2=1007004, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[403]={TargetType=QuestTargetType["Kill"], TargetID1=1007009, TargetID2=1007010, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[404]={TargetType=QuestTargetType["Kill"], TargetID1=1007011, TargetID2=1007012, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[405]={TargetType=QuestTargetType["Kill"], TargetID1=1007101, TargetID2=1007156, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[406]={TargetType=QuestTargetType["Kill"], TargetID1=1007142, TargetID2=1007143, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[407]={TargetType=QuestTargetType["Kill"], TargetID1=1007107, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[408]={TargetType=QuestTargetType["Kill"], TargetID1=1007123, TargetID2=1007124, TargetID3=1007138, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[409]={TargetType=QuestTargetType["Kill"], TargetID1=1007125, TargetID2=1007139, TargetID3=1007140, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[410]={TargetType=QuestTargetType["Kill"], TargetID1=1007168, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[411]={TargetType=QuestTargetType["Kill"], TargetID1=1007163, TargetID2=1007164, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16105}
Quest_XiuXing[412]={TargetType=QuestTargetType["Kill"], TargetID1=1007220, TargetID2=0, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16106}
Quest_XiuXing[413]={TargetType=QuestTargetType["Kill"], TargetID1=1007232, TargetID2=1007233, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16106}
Quest_XiuXing[414]={TargetType=QuestTargetType["Kill"], TargetID1=1007234, TargetID2=1007235, TargetID3=0, TargetID4=0, Num1=35, Num2=0, Num3=0, Num4=0, MsgID=16106}
Quest_XiuXing[501]={TargetType=QuestTargetType["Kill"], TargetID1=1009025, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[502]={TargetType=QuestTargetType["Kill"], TargetID1=1009028, TargetID2=1009029, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[503]={TargetType=QuestTargetType["Kill"], TargetID1=1009030, TargetID2=1009031, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[504]={TargetType=QuestTargetType["Kill"], TargetID1=1009034, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[505]={TargetType=QuestTargetType["Kill"], TargetID1=1009038, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[506]={TargetType=QuestTargetType["Kill"], TargetID1=1009038, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[507]={TargetType=QuestTargetType["Kill"], TargetID1=1009101, TargetID2=1009102, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[508]={TargetType=QuestTargetType["Kill"], TargetID1=1009105, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[509]={TargetType=QuestTargetType["Kill"], TargetID1=1009010, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[510]={TargetType=QuestTargetType["Kill"], TargetID1=1009139, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[511]={TargetType=QuestTargetType["Kill"], TargetID1=1009230, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[512]={TargetType=QuestTargetType["Kill"], TargetID1=1009208, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[513]={TargetType=QuestTargetType["Kill"], TargetID1=1009221, TargetID2=0, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[514]={TargetType=QuestTargetType["Kill"], TargetID1=1009307, TargetID2=1009308, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}
Quest_XiuXing[515]={TargetType=QuestTargetType["Kill"], TargetID1=1009311, TargetID2=1009312, TargetID3=0, TargetID4=0, Num1=40, Num2=0, Num3=0, Num4=0, MsgID=16107}

--接取任务
function x20077_OnQuestInit(MapID, InstanceID, QuestID, RoleID, NPCID)

	local Index = 0
	--获取玩家等级
	local ToTeam = 0
	local HaveTeam = role.IsRoleHaveTeam(MapID, InstanceID, RoleID) --得到队伍ID
	local LeaderID = team.GetTeamLeaderID(HaveTeam)
	if LeaderID == nil then
		LeaderID = 0
	end
	local HowAdd = 10
	local PreID = 0
	local rolelevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	--根据玩家等级和所处场景随机选择任务目标
	if rolelevel>=25 and rolelevel<=30 then
		if MapID==3017298127 then
			Index=0+math.random(9)
		else
			Index=100+math.random(3)
		end
	elseif rolelevel>=31 and rolelevel<=35 then
		Index=103+math.random(7)
	elseif rolelevel>=36 and rolelevel<=40 then
		Index=110+math.random(10)
	elseif rolelevel>=41 and rolelevel<=45 then
		if MapID==3017298383 then
			Index=120+math.random(6)
		else
			Index=200+math.random(4)
		end
	elseif rolelevel>=46 and rolelevel<=50 then
		Index=204+math.random(5)
	elseif rolelevel>=51 and rolelevel<=54 then
		Index=209+math.random(4)
	elseif rolelevel>=55 and rolelevel<=59 then
		if MapID==3017299663 then
			Index=213+math.random(5)
		else
			Index=300+math.random(4)
		end
	elseif rolelevel>=60 and rolelevel<=64 then
		Index=304+math.random(5)
	elseif rolelevel>=65 and rolelevel<=69 then
		Index=309+math.random(5)
	elseif rolelevel>=70 and rolelevel<=75 then
		if MapID==3017299919 then
			Index=314+math.random(4)
		else
			Index=400+math.random(4)
		end
	elseif rolelevel>=76 and rolelevel<=80 then
		Index=404+math.random(5)
	elseif rolelevel>=81 and rolelevel<=85 then
		Index=409+math.random(5)
	elseif rolelevel>=86 and rolelevel<=90 then
		Index=500+math.random(5)
	elseif rolelevel>=91 and rolelevel<=95 then
		Index=505+math.random(5)
	elseif rolelevel>=96 then
		Index=510+math.random(5)
	end


	if HaveTeam~=4294967295 then
		if LeaderID ~= RoleID then
			local bHaveQuest = role.IsRoleHaveQuest(MapID, InstanceID, LeaderID, 20077)
			if bHaveQuest == true then
				HowAdd = 1 --玩家不是队长，且队长接了任务
			else
				HowAdd = 0 --玩家不是队长，且队长没接任务
			end
		else
			HowAdd = 2 -- 此玩家就是队长
		end
	end

	if HowAdd == 0 then
		PreID = 261 --"您接受了修行任务，由于队长未接受，本次任务目标为完全随机"
	elseif HowAdd == 1 then
		local LeaderIndex = role.GetRoleScriptData(LeaderID, 1, RoleDataType["XiuXing_Index"])
		Index = LeaderIndex
		PreID = 262 --"您接受了修行任务，与您队长所接任务目标一致"
	elseif HowAdd == 2 then
		PreID = 263 --"您接受了修行任务且为队长，之后其他队员的任务目标将与您一致"
	end
	role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Index"], Index)

		--初始化任务的动态数据
		role.QuestInit(RoleID, QuestID, GetRandQuestTable(Quest_XiuXing, Index))
		--同步客户端总任务环数和任务说明
		local LoopNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"])
		local MsgID = msg.BeginMsgEvent()
		--local MsgID2 = msg.BeginMsgEvent()
		--msg.AddMsgEvent(MsgID2, 1, Quest_XiuXing[Index].MsgID)
		--msg.AddMsgEvent(MsgID2, 9, Quest_XiuXing[Index].TargetID1)
		--msg.AddMsgEvent(MsgID2, 5, Quest_XiuXing[Index].TargetID1)
		--msg.DispatchRoleMsgEvent(RoleID, MsgID2)

		msg.AddMsgEvent(MsgID, 11, QuestID)
		msg.AddMsgEvent(MsgID, 10, LoopNum)
		--msg.AddMsgEvent(MsgID, 1, MsgID2)
		msg.AddMsgEvent(MsgID, 1, Quest_XiuXing[Index].MsgID)
		msg.DispatchRoleMsgEvent(RoleID, MsgID)

		local MsgID1 = msg.BeginMsgEvent()
		msg.AddMsgEvent(MsgID1, 13, 0)
		msg.AddMsgEvent(MsgID1, 1, PreID)
		msg.DispatchRoleMsgEvent(RoleID, MsgID1)
end

--完成任务
function x20077_OnComplete(MapID, InstanceID, QuestID, RoleID, NPCID)

	local exp_award = {}
	exp_award[25]=2025
	exp_award[30]=2725
	exp_award[35]=3350
	exp_award[40]=4600
	exp_award[45]=5650
	exp_award[50]=7376
	exp_award[55]=9216
	exp_award[60]=11156
	exp_award[65]=13196
	exp_award[70]=15336
	exp_award[75]=17576
	exp_award[80]=19916
	exp_award[85]=22356
	exp_award[90]=24896
	exp_award[95]=27536
	exp_award[100]=30276

	local k = 0
	local Index=role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Index"])
	local rolelevel = role.GetRoleLevel(MapID, InstanceID, RoleID)
	local temp_rolelevel = math.floor(rolelevel/5) *5
	if temp_rolelevel > 100 then
	    temp_rolelevel = 100
	end
	if Index >= 1 and Index <= 9 then
		k=25
	elseif Index >= 101 and Index <= 103 then
		k=25
	elseif Index >= 104 and Index <= 110 then
		k=30
	elseif Index >= 111 and Index <= 120 then
		k=35
	elseif Index >= 121 and Index <= 126 then
		k=40
	elseif Index >= 201 and Index <= 204 then
		k=40
	elseif Index >= 205 and Index <= 209 then
		k=45
	elseif Index >= 210 and Index <= 213 then
		k=50
	elseif Index >= 214 and Index <= 218 then
		k=55
	elseif Index >= 301 and Index <= 304 then
		k=55
	elseif Index >= 305 and Index <= 309 then
		k=60
	elseif Index >= 310 and Index <= 314 then
		k=65
	elseif Index >= 315 and Index <= 318 then
		k=70
	elseif Index >= 401 and Index <= 404 then
		k=70
	elseif Index >= 405 and Index <= 409 then
		k=75
	elseif Index >= 410 and Index <= 414 then
		k=80
	elseif Index >= 501 and Index <= 505 then
		k=85
	elseif Index >= 506 and Index <= 510 then
		k=90
	elseif Index >= 511 and Index <= 515 then
		k=95
	end
	--加入防止小号刷经验机制
	if exp_award[temp_rolelevel] < exp_award[k] then
		k = temp_rolelevel
	end
	--得到当前任务总环数
	local LoopNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"])
	local TotalNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"])
	--计算环数
	local LoopNum_Ring = LoopNum % 10
	if LoopNum_Ring == 0 then
		LoopNum_Ring = 10
	end

	--奖励玩家经验
	local IsDouble = 0
	if TotalNum <= 20 then
		IsDouble = 2
	else
		IsDouble = 1
	end

	role.AddRoleExp(MapID, InstanceID, RoleID, exp_award[k] * IsDouble)

	--奖励玩家金钱
	local silver=0
	--金钱奖励系数
	for i=1,30 do
		if i*5>rolelevel then
			silver=activity_money[i*5]*activity_money_rate["XiuXing"]
			break
		end
	end
	role.AddRoleSilver(MapID, InstanceID, RoleID, silver, 102)

	--10环时奖励龙珠界通行令
	if LoopNum_Ring== 10 then
		if k>=90 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200451, 1, -1, 8, 102)
		elseif k>=80 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200441, 1, -1, 8, 102)
		elseif k>=70 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200431, 1, -1, 8, 102)
		elseif k>=60 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200421, 1, -1, 8, 102)
		elseif k>=50 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200411, 1, -1, 8, 102)
		elseif k>=40 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200401, 1, -1, 8, 102)
		elseif k>=20 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3200467, 1, -1, 8, 102)
		end
	end

	--总任务环数加一
	role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"], LoopNum+1)
	role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"], TotalNum+1)

	--增加进阶实力值
			Increase_shili(MapID, InstanceID, RoleID, 0, 2, "jinjieshili_Q")
    --[[开学活动
    local curhour = os.date("%H")
	local act_start = act.GetActIsStart(77)
	if act_start == true and (curhour=="19" or curhour=="20" or curhour=="21" or curhour=="22" or curhour=="23") then
	    role.AddRoleItem(MapID, InstanceID, RoleID, 3303206, 1, -1, 8, 102)
		HuoDeLeiFengMao(RoleID)
		local i = math.random(3)
		if i == 1 then
			role.AddRoleItem(MapID, InstanceID, RoleID, 3303208, 1, -1, 8, 102)
		end
	end]]

end

--放弃任务
function x20077_OnCancel(MapID, InstanceID, QuestID, RoleID)
	local TotalNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"])
	local LoopNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"])
	local LoopNum_Ring = LoopNum % 10
	if LoopNum_Ring == 0 then
		LoopNum_Ring = 10
	end
	--总任务环数加一，当前环数置为1
	role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"], LoopNum-LoopNum_Ring+1)
	role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"], TotalNum+1)

end

function x20077_OnCheckAccept(MapID, InstanceID, QuestID, RoleID, NPCID)

	--判断本日任务接取次数是否已满
	--得到当前任务总任务环数
	local LoopNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"])
	local TotalNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"])
	local UpdateTime = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Update"])

	--总环数为0时，设置总环数为第一环
	if 0 == LoopNum then
		LoopNum = 1
		role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"], LoopNum)
	end
	if 0 == TotalNum then
		TotalNum = 1
		role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"], TotalNum)
	end

	--检测任务上次更新日期，若与当前日期不一致，则重置总环数及更新日期
	local CurTime = tonumber(os.date("%j"))
	if CurTime~=UpdateTime then
		role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"], 1)
		role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Total"], 1)
		role.SetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Update"], CurTime)
	end

	return 1
end

function x20077_OnCheckComplete(MapID, InstanceID, QuestID, RoleID, NPCID)

	local LoopNum = role.GetRoleScriptData(RoleID, 1, RoleDataType["XiuXing_Loop"])
	local LoopNum_Ring = LoopNum % 10
	if LoopNum_Ring == 0 then
		--判断背包空闲空间是否足够
		local FreeSize = role.GetBagFreeSize(RoleID)
		if(FreeSize < 1) then
			local MsgID = msg.BeginMsgEvent()
			msg.AddMsgEvent(MsgID, 26, 142)
			msg.DispatchRoleMsgEvent(RoleID, MsgID)
			return 0
		end
	end

	return 1
end


aux.RegisterQuestEvent(20077, 1, "x20077_OnComplete")
aux.RegisterQuestEvent(20077, 7, "x20077_OnQuestInit")
aux.RegisterQuestEvent(20077, 2, "x20077_OnCancel")
aux.RegisterQuestEvent(20077, 4, "x20077_OnCheckAccept")
aux.RegisterQuestEvent(20077, 5, "x20077_OnCheckComplete")
